>[!Info] Volume이란?
>- **호스트 머신의 폴더**
>- 컨테이너나 이미지에 있는 것이 아닌, **호스트 컴퓨터**에 장착된 하드 드라이버에 존재
>- **도커 컨테이너 내부의 폴더에 맵핑**된다.
>- 컨테이너가 종료된 경우에도 데이터가 지속되며 계속 존재한다.
>- 컨테이너 외부에서 엑세스 하려는 폴더와 단순히 컨테이너 종료와 제거 후에도 생존해야 하는 데이터에 사용할 수 있다.
>- 컨테이너 외부의 특정 폴더에 연결된 Docker 컨테이너 내부의 폴더/파일



# Anonymus Volume
: 컨테이너가 **존재하는 동안에만** 데이터 존재
```Dockerfile
FROM node:14  
  
WORKDIR /app  
  
COPY package.json .  
  
RUN npm install  
  
COPY . .  
  
EXPOSE 80  
  
# 컨테이너의 외부 폴더에  매핑되어질 컨테이너 내부 위치
#Anonymus Volume: 도커파일 내부에 작성 가능
VOLUME ["/app/feedback"]  
  
CMD ["node", "server.js"]
```


# Named Volume
: 컨테이너가 **종료된 후에도** 데이터가 존재
: 도커파일 내부에 작성 불가능 -> 컨테이너를 실행할 때 **명령어로 작성**

```
> docker run --name feedback-app -p 3000:80 -d --rm -v feedback:/app/feedback feedback-node:volumes
```

![[Pasted image 20241224154622.png]]

# 바인드 마운트
- 도커에 의해 관리되는 볼륨의 위치,
  즉, 호스트 머신의 파일 시스템 상의 볼륨이 어디에 있는지 우리는 실제로 알지 못한다.
- 하지만, **바인드 마운트의 경우 그 위치를 알고 있다.**
	- **개발자가 호스트 머신 상에 매핑될 컨테이너의 경로를 설정하기 때문이다.**
	- 로컬 호스트 머신 상의 경로를 완전히 인식할 수 있다.
		- 컨테이너는 볼륨에 쓸 수 있을 뿐만 아니라, 볼륨에서 읽을 수도 있기에 당연히 소스 코드를 이러한 바인드 마운트에 넣을 수 있다.
		- 이렇게 하면 컨테이너는 이를 인식하여 소스 코드를 실제로 스냅샷에서 복사하는 것이 아니라, **바인딩 마운트에서 복사한다.**
		- 그 폴더는 호스트 머신의 어떤 폴드에 연결된 것이다.
			- 그래서 컨테이너는 항상 최신 코드에 액세스 할 수 있다.
- **바인드 마운트는 영구적이고 편집 가능한 데이터에 적합하다.**
	- 명명된 볼륨(named volume)은 영구 데이터에 도움이 되지만, 편집이 불가능하다.
		- 호스트 머신의 어디에 저장되어 있는지 모르기 때문에.
	- 바인드 마운트는 Dockerfile 내부에서 할 수 있는 것이 아니다
		- 이미지가 아니라, 실행하는 컨테이너에만 적용되기 때문에 이미지에는 영향을 주지 않고, **컨테이너에만 영향을 준다.**
		- 그러므로 컨테이너를 실행할 때 **터미널 내부에서 바인드 마운트를 설정해야 한다.**


# Volume & Bind Mounts
![[Pasted image 20250111230548.png]]

- 익명 볼륨 (Anonymous Volume)
	- 컨테이너가 제거되면 볼륨 역시 제거된다.
	- 컨테이너를 종료하고 다시 시작해도 컨테이너가 제거되면 익명 볼륨은 제거된다.
		- 중지(stop)후 다시 시작(start)를 하면 익명 볼륨이 유지되어 있다.
	- 컨테이너 간에 데이터를 공유할 수 없다.
		- 익명 볼륨의 위치를 알 수 없으므로
		- 컨테이너 삭제 시 볼륨이 삭제되므로 데이터를 공유하거나 재사용하기 어렵다. (데이터의 지속성을 유지하려는 공유 목적과 충돌한다.)
	- 데이터가 다른 모듈에 의해 덮어쓰여지는 것을 방지하는데 유용하게 사용된다.
	  `-v /app/node_modules`
- 명명된 볼륨 (Named Volume)
	- Dockerfile에서 생성할 수 없다.
		- 컨테이너를 실행할 때 `-v` 명령으로 생성한다.
		- 콜론(:) 앞에 이름을 지정한다.
	- 컨테이너를 종료하고, 제거해도 볼륨이 유지된다.
	- 여러 컨테이너 간에 데이터를 공유할 수 있다.
- 바인드 마운트 (Bind Mount)
	- 호스트 머신에 데이터가 저장되는 위치를 알고 있다.
	- 컨테이너를 종료하고, 제거해도 볼륨이 유지된다.
	- 여러 컨테이너 간에 데이터를 공유할 수 있다.
![[Pasted image 20250112000758.png]]