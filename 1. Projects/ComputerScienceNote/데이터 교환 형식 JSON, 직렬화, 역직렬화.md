# 데이터 교환 형식 #1. JSON과 직렬화와 역직렬화

## ✅ JSON이란?

> **JavaScript 객체 문법으로 구조화된 데이터 교환 형식**

- 여러 언어에서 **데이터 교환 형식**으로 사용된다.
- 서로 다른 시스템 간 데이터를 주고받기 좋다.
- 주로 **API 데이터 반환**, **설정 파일** 등에 사용된다.
- **key-value 구조**, **프레임워크 및 언어 독립적**이다.
- 문자열 기반의 텍스트 포맷이라 **가볍고 사람이 읽기 쉽다**.

---

## 📦 데이터 교환 형식이란?

> 데이터를 주고받기 위해 약속한 **형식 또는 규칙**



## 🔁 직렬화와 역직렬화

| 개념                        | 설명                                                            |
| ------------------------- | ------------------------------------------------------------- |
| **직렬화(Serialization)**    | 객체를 외부의 시스템에서도 사용할 수 있도록 전송/저장 가능한 형식(문자열 또는 바이트 등)으로 변환하는 기술 |
| **역직렬화(Deserialization)** | 직렬화된 데이터를 다시 객체로 복원하는 기술                                      |

### ✅ 직렬화 포맷

- **JSON**: 텍스트 기반 직렬화 포맷  
- **Java Serializable**: 바이트 기반 직렬화 = 이진 직렬화

Serializable 인터페이스: 이 객체가 직렬화 가능하다고 JVM에게 알리는 마커
ObjectOutputStream: 실제로 객체를 **직렬화(byte[]로 변환)**해서 파일, 네트워크로 전송

---

### 🔽 직렬화 예시
직렬화
├─ Java        → JSON
├─ Python      → JSON
└─ JavaScript  → JSON


### 🔼 역직렬화 예시
역직렬화
├─ JavaScript  ← JSON
├─ Python      ← JSON
└─ Java        ← JSON
    
---

## 💡 Java 객체를 ObjectOutputStream으로 변환하는 이유

> 파일에 저장하거나, 네트워크로 전송할 수 있도록 하기 위함

### ObjectOutputStream이란?

- 자바 표준 라이브러리 클래스
- 객체를 **바이트 스트림(byte[])**으로 변환
- 결과는 `.ser` 파일 등으로 저장되며,
  네트워크, 소켓, 데이터베이스로 전송 가능

### 바이트로 바꾸는 이유?

1. **저장**  
   객체는 메모리 상태 그대로 저장할 수 없기 때문에  
   바이트로 직렬화해서 저장해야 함

2. **전송**  
   네트워크는 객체가 아닌 byte[]만 전송 가능

3. **복원 가능성**  
   직렬화된 바이트는 `ObjectInputStream`으로 복원 가능  
   → 복원하려면 **Serializable 인터페이스 구현 필수**


### ⚠️ 이진 직렬화의 단점

- 버전 호환성 문제가 발생할 수 있음
- 자바 전용 포맷이라 다른 언어와 연동이 어려움
- 클래스 구조가 바뀌면 역직렬화 실패 가능성 있음

---

## ❓ JSON 외에도 직렬화 포맷은 없을까?

JSON, XML, YAML은 모두 **텍스트 기반 직렬화 포맷**이다. 
각각 장단점이 있으므로 **사용 목적과 환경에 따라 선택**하는 것이 중요하다.


### 🔷 JSON (JavaScript Object Notation)

1. **key-value 구조**, 사람이 읽기 쉽고 브라우저와의 호환성이 뛰어남  
2. **웹 API 통신**, 설정 파일에 주로 사용  
3. 문자열 기반으로 디버깅 용이  
4. Gson, Jackson 등 다양한 라이브러리 지원



### 🔷 XML(Extensible Markup Language)

> 마크업 형태를 쓰는 데이터 교환 형식

1. 태그 기반 구조화된 표현, **계층 구조 표현 강점**  
2. **속성(attribute)** 표현 가능  
3. 태그 이름 사용자가 자유롭게 정의  
4. **스키마(XSD)**로 문서 구조 및 제약조건 검증 가능  
5. **금융, 공공기관, 레거시 시스템**에서 여전히 많이 사용  
6. **단점**: 문서 길고 무거움, 파싱 느림

![naver_sitemap.xml](https://velog.velcdn.com/images/jackson/post/44245490-1550-4b85-9e67-0e237e0e7045/image.png)

출처: https://searchadvisor.naver.com/guide/request-feed




### 🔷 YAML (YAML Ain't Markup Language)

1. 사람이 읽고 쓰기 쉽도록 설계된 포맷  
2. 들여쓰기 기반 → 가독성 매우 뛰어남  
3. **주석 가능**, JSON보다 더 간결  
4. 반복 데이터에 강한 **앵커(&, *) 기능** 지원  
5. 예시: `application.yml`, `docker-compose.yml`



### ✅ 결론

- **JSON**은 간결하고 빠르며, **웹 환경**에 최적화
- **XML**은 구조 표현 및 검증이 필요한 **레거시 시스템**에 적합
- **YAML**은 **설정 파일** 등에서 가독성과 간결함이 중요할 때 유리

---
추가로 알아볼 내용
   ├─ Java Serializable
   └─ Protocol Buffers
      └─ 차이점이 뭘까 ?
   └─ 이진 직렬화 시 왜 버전 호환 문제가 발생하지 ?
   └─ 다른 언어와 연동이 불가능한 이유는?
   └─ 클래스 구조가 바뀌면 역직렬화 실패 가능성이 있는 이유는??


# 🔍 추가로 알아본 내용

## ✅ XML보다 JSON을 주로 사용하는 이유


### 1️⃣ 구조가 더 가볍고 파싱 속도가 빠르다

- XML은 **닫는 태그(close tag)**가 많아서 문서가 더 길어지고 **무거운 구조**를 갖는다.
- 반면 JSON은 **간결한 key-value 구조**로 되어 있어 **파싱 속도**가 빠르다.
```
 XML: <name>Jackson</name>
 JSON: "name": "Jackson"
 ```


### 2️⃣ 객체로 변환하기가 더 쉽다

- JSON은 **객체 지향 언어(Java, JS, Python 등)**와 구조적으로 유사해서  
  → **객체 매핑(Object Mapping)**이 쉽고 자동화하기 좋다.
- XML은 **중첩, 속성(attribute), 네임스페이스 처리** 등으로 인해  
  → 더 복잡한 파싱 로직이 필요하다.

> ✅ Java에서는 Jackson이 JSON, XML, YAML 모두 지원하지만,  
> 다른 언어에서는 XML 라이브러리 지원 여부를 별도로 확인해야 한다.

---

## ✅ YAML보다 JSON을 데이터 교환 형식으로 주로 사용하는 이유

> ❓ YAML도 JSON만큼 가볍고 사람이 읽기 좋은데,  
	왜 실무에서는 JSON이 더 많이 쓰일까?
    

### 1️⃣ 구조가 단순해서 파싱 속도가 빠르고 안정적이다

- JSON은 중괄호 `{}`, 대괄호 `[]`로 구조가 명확하게 구분되어 있어  
  → 파싱이 빠르고 안정적으로 동작한다.

- YAML은 **들여쓰기를 기반**으로 구조를 표현하기 때문에  
  → 들여쓰기 오류, 문법 에러(무효한 들여쓰기, 혼합 탭/스페이스 등)가 더 자주 발생할 수 있다.
```
 📌 JSON 예시:  
 { "name": "Jackson", "age": 100 }
```


```yaml
 ❗YAML 예시:  
 name: Jackson  
   age: 100   # ← 💥 들여쓰기 오류 💥 
```


### 2️⃣ 대부분의 프로그래밍 언어가 JSON을 기본으로 지원한다

- JavaScript는 JSON 문법에서 파생되었기 때문에 `JSON.parse()`로 바로 사용할 수 있다.
- Python, Java, JS 등 **기본 JSON 파서가 내장**되어 있다.
- 반면 YAML은 외부 라이브러리를 추가해야 한다.


### 3️⃣ JSON은 보안적으로도 더 안전하다

- YAML은 파싱 시 객체 타입을 자동으로 생성할 수 있어  
  → `YAML bomb`, `임의 코드 실행(arbitrary code execution)`과 같은 **보안 이슈**가 존재한다.

- JSON은 문자열 중심이고 구조가 단순하기 때문에  
  → **보안상 훨씬 안전하고 예측 가능**하다.


### ✅ 결론

> YAML은 사람이 읽기엔 좋지만,  
> JSON은 **머신이 처리하기 더 쉽고 안전하며, 모든 언어에서 기본 지원된다.**

따라서 **데이터 교환 형식(API 응답, 네트워크 통신 등)**으로는  
**JSON이 사실상 업계 표준처럼 사용**되고 있다.

YAML은 설정 파일에서는 여전히 많이 사용된다.  
`application.yml`, `docker-compose.yml`, `GitHub Actions` 설정 등

---

