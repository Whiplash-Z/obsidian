>[!Check] 프로그램의 실행: 프로그램을 구성하는 코드를 순서대로 CPU에서 연산(실행)하는 일

# 멀티태스킹
![[Pasted image 20241202112204.png]]
- CPU 코어가 프로그램 A의 코드를 0.01초 정도 수행하다가 잠시 멈추고,
  프로그램 B의 코드를 0.01초 정도 수행한다. (반복)
- 이렇게 각 프로그램의 실행 시간을 분할해서 **마치 동시에 실행되는 것 처럼 하는 기법**을 **시분할(Time Sharing, 시간 공유) 기법**이라 한다.
- 이런 방식을 사용하면 CPU 코어가 하나만 있어도 여러 프로그램이 동시에 실행되는 것 처럼 느낄 수 있다.
- 이렇게 **하나의 컴퓨터 시스템이 동시에 여러 작업을 수행하는 능력**을 **멀티태스킹(Multitasking)** 이라 한다.

>[!Note] 스케줄링(Scheduling): CPU에 어떤 프로그램이 얼마만큼 실행될지 운영체제가 결정

# 멀티프로세싱
![[Pasted image 20241202112555.png]]
![[Pasted image 20241202112605.png]]

>[!Check] 멀티프로세싱(Multiprocessing): 컴퓨터 시스템에서 둘 이상의 프로세서(CPU Core)를 사용하여 여러 작업을 동시에 처리하는 기술
- CPU 코어가 2개이므로 물리적으로 동시에 2개의 프로그램을 처리할 수 있다.
- 멀티프로세싱 시스템은 하나의 CPU 코어만을 사용하는 시스템보다 동시에 더 많은 작업을 처리할 수 있다.

>[!Note] 멀티프로세싱 VS 멀티태스킹
>- 멀티프로세싱
>	- **여러 CPU(여러 CPU Core)를 사용**하여 동시에 여러 작업을 수행하는 것.
>	- **하드웨어 기반**으로 성능을 향상시킨다.
>	- ex) 다중 코어 프로세서를 사용하는 현대 컴퓨터 시스템
>- 멀티태스킹
>	- **단일 CPU(단일 CPU Core)** 가 여러 작업을 **동시에 수행하는 것처럼** 보이게 하는 것.
>	- **소프트웨어 기반**으로 **CPU 시간을 분할**하여 각 작업에 할당한다.
>	- ex) 현대 운영 체제에서 여러 애플리케이션이 동시에 실행되는 환경


# 프로세스와 스레드
![[Pasted image 20241202115000.png]]

## 프로세스 (Process)
>[!Note] 프로세스(Process): 운영체제 안에서 실행중인 프로그램
>- 독립적인 메모리 공간을 가지고 있고, 운영체제에서 별도의 작업 단위로 분리해서 관리한다.
>- 프로세스는 별도의 메모리 공간을 갖고 있기 때문에 서로 간섭하지 않는다.
>- 프로세스가 서로의 메모리에 직접 접근할 수 없다.
>- 이렇게 서로 격리되어 관리되기 때문에, 하나의 프로세스가 충돌해도 다른 프로세스에는 영향을 미치지 않는다.

- 프로그램은 실제 실행하기 전까지는 단순한 파일에 불과하다.
- 프로그램을 실행하면 프로세스가 만들어지고 프로그램이 실행된다.
- 프로세스는 실행 중인 프로그램의 인스턴스이다.
- 자바 언어로 비유하자면, 클래스는 프로그램이고, 인스턴스는 프로세스이다.

## 프로세스의 메모리 구성
- 코드 섹션: 실행할 프로그램의 코드가 저장되는 부분
- 데이터 섹션: 전역 변수 및 정적 변수가 저장되는 부분(그림에서 기타에 해당)
- 힙(Heap): 동적으로 할당되는 메모리 영역
- 스택(Stack): 메서드(함수) 호출 시 생성되는 지역 변수와 반환 주소가 저장되는 영역(스레드에 포함)

## 스레드 (Thread)
>[!Note] 스레드(Thread): 프로세스 내에서 실행되는 작업 단위
>- 한 프로세스 내에서 여러 스레드가 존재할 수 있다.
>- 프로세스가 제공하는 동일한 메모리 공간을 공유한다.
>- 스레드는 프로세스보다 단순하므로 생성 및 관리가 단순하고 가볍다.

>메모리 구성
- 공유 메모리: 같은 프로세스의 코드 섹션, 데이터 섹션, 힙(메모리)은
  **프로세스 안의 모든 스레드가 공유한다.**
- 개별 스택: 각 스레드는 **자신의 스택을 갖고 있다.**

>프로그램이 실행된다는 것은 어떤 의미일까?
1. 프로그램 실행
2. 운영체제가 디스크에 있는 파일 덩어리인 프로그램을 메모리에 불러오면서 프로세스 생성
3. 프로그램 실행: 프로세스 안에 있는 코드가 한 줄씩 실행되는 것.
4. 스레드가 코드를 위에서 아래로 하나씩 실행한다.

>멀티스레드가 필요한 이유

- 하나의 프로그램도 그 안에서 동시에 여러 작업이 필요하다.
	- 워드 프로그램 - 프로세스 A
		- Thread1: 문서 편집
		- Thread2: 자동 저장
		- Thread3: 맞춤법 검사
	- 유튜브 - 프로세스 B (영상을 보면서 댓글 작성 가능)
		- Thread1: 영상 재생
		- Thread2: 댓글

# 스레드와 스케줄링
>운영체제는 내부에 스케줄링 큐를 가지고 있고, 각각의 스레드는 스케줄링 큐에서 대기한다.

![[Pasted image 20241202134420.png]]
- 스레드A1, 스레드B1, 스레드B2,가 스케줄링 큐에 대기한다.

![[Pasted image 20241202134455.png]]
- 운영체제는 스레드A1을 큐에서 꺼내고 CPU를 통해 실행한다.
- 이때 스레드A1이 프로그램의 코드를 수행하고, CPU를 통한 연산도 일어난다.

![[Pasted image 20241202134534.png]]
- 운영체제는 스레드A1을 잠시 멈추고, 스케줄링 큐에 다시 넣는다.

![[Pasted image 20241202134554.png]]
- 운영체제는 스레드B1을 큐에서 꺼내고 CPU를 통해 실행한다.
- 이런 과정을 반복해서 수행한다.

